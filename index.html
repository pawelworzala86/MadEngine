<!doctype html>
<html>
   <body>
      <script src="/gl-matrix-min.js"></script>
      
      <script src="/common.js"></script>

      <script src="/webgl/common.js"></script>
      <script src="/webgl/shader.js"></script>
      <script src="/webgl/mesh.js"></script>
      <script src="/webgl/model.js"></script>
       
      <script src="/webgl/index.js"></script>


      <script type="module">
         import {initEngine} from '/Engine.js'

         const wasm_file = 'madengine.wasm'
       
       
       
         const memory = new WebAssembly.Memory({ initial: 100 })
       
         var importObject = {
           env: {
             memory: memory,
             seed: Date.now,
           }
         }
       
         initEngine(importObject)

         ;(async () => {
            // use WebAssembly.instantiateStreaming in combination with
            // fetch instead of WebAssembly.instantiate and fs.readFileSync
            let obj = await WebAssembly.instantiateStreaming(
               fetch(wasm_file),
               importObject);
            console.log(obj);
            var exports = obj.instance.exports;
            console.log(exports);
            //ASWebGLReady(obj, importObject);
            //requestAnimationFrame(renderFrame);
         })();
       </script>
   </body>
</html> 